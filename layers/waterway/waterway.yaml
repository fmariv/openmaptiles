layer:
  id: "waterway"
  # waterway relies on the function waterway_brunnel() defined in water layer
  requires:
    layers:
      - water
  description: |
      OpenStreetMap [waterways](https://wiki.openstreetmap.org/wiki/Waterways) for higher zoom levels (z9 and more)
      and Natural Earth rivers and lake centerlines for low zoom levels (z3 - z8).
      Linestrings without a name or which are too short are filtered
      out at low zoom levels.
      Till z11 there is `river` class only, in z12 there is also `canal` generated,
      starting z13 there is no generalization according to `class` field applied.
      Waterways do not have a `subclass` field.
  buffer_size: 4
  fields:
    name: |
        The OSM [`name`](http://wiki.openstreetmap.org/wiki/Key:name) value of the waterway.
        The `name` field may be empty for NaturalEarth data or at lower zoom levels.
    icgc_id:
      description:
        Identificador de l'ICGC.
    localtype: Pendent.
    localid: Pendent.
    origin: Pendent.
    namespace: Pendent.
    cas: Pendent.
    ordre: Pendent.
    grau: Pendent.
    codi: Pendent.
    codi_short: Pendent.
    class_area: Pendent.
    class_long: Pendent.
    class_codi: Pendent.
    long_cod: Pendent.
  datasource:
    geometry_field: geometry
    query: (SELECT icgc_id, geometry, name, localtype, localid, origin, namespace, cas, ordre, grau, codi, codi_short, class_area, class_long, class_codi, long_cod FROM layer_waterway(!bbox!, z(!scale_denominator!))) AS t
schema:
  - ./waterway.sql
